(()=>{"use strict";class s{static URL="ws://localhost:8080";constructor(e){this.options=e,this.ws=new WebSocket(s.URL),this.ws.onopen=this.onopen.bind(this),this.ws.close=this.close.bind(this),this.ws.onerror=this.onerror.bind(this),this.ws.onmessage=this.onmessage.bind(this)}onmessage(s){try{const e=JSON.parse(s.data);this.options.onMessage(e)}catch(s){this.options.onError(s)}}onopen(){console.log("Connection was established")}close(){console.log("Connection was stopped")}onerror(s){console.log("Connection was interrapted",s.message)}send(s){const e=JSON.stringify({name:s.name,message:s.message});try{this.ws.send(e)}catch(s){this.options.onError(s)}}}const e=document.querySelector("#formWs"),n=document.querySelector("#container"),t=new s({onMessage:function(s){n.insertAdjacentHTML("beforeend",function(s){return`<tr>\n  <td >${s.name}</td>\n  <td>${s.message}</td>\n      </tr>`}(s))},onError:function(s){alert(s.message)}});e.addEventListener("submit",(function(s){s.preventDefault();const n={name:e.name.value,message:e.message.value};t.send(n)}))})();